<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-netty/问题总结" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">问题总结 | xilio</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://xilio-doc.github.io/xilio-doc/en/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://xilio-doc.github.io/xilio-doc/en/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://xilio-doc.github.io/xilio-doc/en/docs/netty/问题总结"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" property="og:locale:alternate" content="zh"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="问题总结 | xilio"><meta data-rh="true" name="description" content="Netty 基础相关问题"><meta data-rh="true" property="og:description" content="Netty 基础相关问题"><link data-rh="true" rel="icon" href="/xilio-doc/en/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://xilio-doc.github.io/xilio-doc/en/docs/netty/问题总结"><link data-rh="true" rel="alternate" href="https://xilio-doc.github.io/xilio-doc/en/docs/netty/问题总结" hreflang="en"><link data-rh="true" rel="alternate" href="https://xilio-doc.github.io/xilio-doc/docs/netty/问题总结" hreflang="zh"><link data-rh="true" rel="alternate" href="https://xilio-doc.github.io/xilio-doc/docs/netty/问题总结" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/xilio-doc/en/blog/rss.xml" title="xilio RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/xilio-doc/en/blog/atom.xml" title="xilio Atom Feed"><link rel="stylesheet" href="/xilio-doc/en/assets/css/styles.56736303.css">
<script src="/xilio-doc/en/assets/js/runtime~main.84040de3.js" defer="defer"></script>
<script src="/xilio-doc/en/assets/js/main.eee8b81b.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/xilio-doc/en/img/logo4.png"><div role="region" aria-label="Skip to main content"><a class="skipToContent_krfC" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/xilio-doc/en/"><div class="navbar__logo"><img src="/xilio-doc/en/img/logo4.png" alt="xilio Logo" class="themedComponent_DBJS themedComponent--light_srcf"><img src="/xilio-doc/en/img/logo4.png" alt="xilio Logo" class="themedComponent_DBJS themedComponent--dark_BwVf"></div><b class="navbar__title text--truncate">xilio</b></a><a class="navbar__item navbar__link" href="/xilio-doc/en/docs/java/NIO/基础">Java</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/xilio-doc/en/docs/netty/Protobuf">Netty</a><a class="navbar__item navbar__link" href="/xilio-doc/en/docs/middleware/Nginx/介绍">中间件</a><a class="navbar__item navbar__link" href="/xilio-doc/en/docs/database/mysql/问题/Menmory引擎的使用场景">数据库</a><a class="navbar__item navbar__link" href="/xilio-doc/en/docs/web-server/tomcat/SpringBoot如何实现内嵌式Tomcat">Web服务器</a><a class="navbar__item navbar__link" href="/xilio-doc/en/docs/distributed/zookeeper/介绍">分布式</a><a class="navbar__item navbar__link" href="/xilio-doc/en/docs/microservice/介绍">微服务</a><a class="navbar__item navbar__link" href="/xilio-doc/en/docs/cloudNative/介绍">云原生</a><a class="navbar__item navbar__link" href="/xilio-doc/en/docs/opensource/介绍">开源项目</a><a class="navbar__item navbar__link" href="/xilio-doc/en/docs/alg/介绍">算法</a><a class="navbar__item navbar__link" href="/xilio-doc/en/docs/test/压测/压力测试基础">测试</a><a class="navbar__item navbar__link" href="/xilio-doc/en/docs/other/Linux/Shell脚本用法">其他</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/xilio-doc/en/blog">博客</a><a href="https://github.com/xilio-dev" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_QBFE"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_aqmj colorModeToggle_AEMF"><button class="clean-btn toggleButton_e_pL toggleButtonDisabled_DopM" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_kDty"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_JuIf"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_ENFa"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z7Es"><div class="docsWrapper_eKlp"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_KpH3" type="button"></button><div class="docRoot_zzrW"><aside class="theme-doc-sidebar-container docSidebarContainer_LcIi"><div class="sidebarViewport_FBf4"><div class="sidebar_fj3_"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_KKwp"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/xilio-doc/en/docs/netty/Protobuf">Protobuf</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/xilio-doc/en/docs/netty/入门案例">入门案例</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/xilio-doc/en/docs/netty/基础知识">基础知识</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/xilio-doc/en/docs/netty/常见的坑">常见的坑</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/xilio-doc/en/docs/netty/应用场景">应用场景</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/xilio-doc/en/docs/netty/网络基础">网络基础</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/xilio-doc/en/docs/netty/问题总结">问题总结</a></li></ul></nav></div></div></aside><main class="docMainContainer_ilkh"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_gAo8"><div class="docItemContainer_AOme"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Ry_8" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/xilio-doc/en/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_u7p0"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">问题总结</span><meta itemprop="position" content="1"></li></ul></nav><div class="tocCollapsible_D3ep theme-doc-toc-mobile tocMobile_jdd7"><button type="button" class="clean-btn tocCollapsibleButton_uot6">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>问题总结</h1></header><h2 class="anchor anchorWithStickyNavbar_gDIi" id="netty-基础相关问题">Netty 基础相关问题<a href="#netty-基础相关问题" class="hash-link" aria-label="Direct link to Netty 基础相关问题" title="Direct link to Netty 基础相关问题">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_gDIi" id="讲讲-netty-的特点">讲讲 Netty 的特点？<a href="#讲讲-netty-的特点" class="hash-link" aria-label="Direct link to 讲讲 Netty 的特点？" title="Direct link to 讲讲 Netty 的特点？">​</a></h3>
<h3 class="anchor anchorWithStickyNavbar_gDIi" id="netty-的高性能体现在">Netty 的高性能体现在？<a href="#netty-的高性能体现在" class="hash-link" aria-label="Direct link to Netty 的高性能体现在？" title="Direct link to Netty 的高性能体现在？">​</a></h3>
<h3 class="anchor anchorWithStickyNavbar_gDIi" id="netty-的线程模型是什么">Netty 的线程模型是什么？<a href="#netty-的线程模型是什么" class="hash-link" aria-label="Direct link to Netty 的线程模型是什么？" title="Direct link to Netty 的线程模型是什么？">​</a></h3>
<h3 class="anchor anchorWithStickyNavbar_gDIi" id="什么是-reactor-模型">什么是 Reactor 模型？<a href="#什么是-reactor-模型" class="hash-link" aria-label="Direct link to 什么是 Reactor 模型？" title="Direct link to 什么是 Reactor 模型？">​</a></h3>
<h3 class="anchor anchorWithStickyNavbar_gDIi" id="说说-netty-中几个重要的对象是什么它们之间的关系是什么">说说 Netty 中几个重要的对象是什么，它们之间的关系是什么？<a href="#说说-netty-中几个重要的对象是什么它们之间的关系是什么" class="hash-link" aria-label="Direct link to 说说 Netty 中几个重要的对象是什么，它们之间的关系是什么？" title="Direct link to 说说 Netty 中几个重要的对象是什么，它们之间的关系是什么？">​</a></h3>
<h3 class="anchor anchorWithStickyNavbar_gDIi" id="eventloop-与-eventloopgroup-是什么关系">EventLoop 与 EventLoopGroup 是什么关系？<a href="#eventloop-与-eventloopgroup-是什么关系" class="hash-link" aria-label="Direct link to EventLoop 与 EventLoopGroup 是什么关系？" title="Direct link to EventLoop 与 EventLoopGroup 是什么关系？">​</a></h3>
<h3 class="anchor anchorWithStickyNavbar_gDIi" id="channel-与-socket-是什么关系channel-与-eventloop-是什么关系channel-与-channelpipeline-是什么关系">Channel 与 Socket 是什么关系，Channel 与 EventLoop 是什么关系，Channel 与 ChannelPipeline 是什么关系？<a href="#channel-与-socket-是什么关系channel-与-eventloop-是什么关系channel-与-channelpipeline-是什么关系" class="hash-link" aria-label="Direct link to Channel 与 Socket 是什么关系，Channel 与 EventLoop 是什么关系，Channel 与 ChannelPipeline 是什么关系？" title="Direct link to Channel 与 Socket 是什么关系，Channel 与 EventLoop 是什么关系，Channel 与 ChannelPipeline 是什么关系？">​</a></h3>
<h3 class="anchor anchorWithStickyNavbar_gDIi" id="讲讲-netty-底层操作与-java-nio-操作对应关系">讲讲 Netty 底层操作与 Java NIO 操作对应关系？<a href="#讲讲-netty-底层操作与-java-nio-操作对应关系" class="hash-link" aria-label="Direct link to 讲讲 Netty 底层操作与 Java NIO 操作对应关系？" title="Direct link to 讲讲 Netty 底层操作与 Java NIO 操作对应关系？">​</a></h3>
<h3 class="anchor anchorWithStickyNavbar_gDIi" id="netty-的-channelhandler-为什么需要-sharable-注解">Netty 的 ChannelHandler 为什么需要 @Sharable 注解？<a href="#netty-的-channelhandler-为什么需要-sharable-注解" class="hash-link" aria-label="Direct link to Netty 的 ChannelHandler 为什么需要 @Sharable 注解？" title="Direct link to Netty 的 ChannelHandler 为什么需要 @Sharable 注解？">​</a></h3>
<h3 class="anchor anchorWithStickyNavbar_gDIi" id="spring-postconstruct-是什么">Spring @PostConstruct 是什么？<a href="#spring-postconstruct-是什么" class="hash-link" aria-label="Direct link to Spring @PostConstruct 是什么？" title="Direct link to Spring @PostConstruct 是什么？">​</a></h3>
<h3 class="anchor anchorWithStickyNavbar_gDIi" id="计算机网络中mtumss是什么">计算机网络中MTU、MSS是什么？<a href="#计算机网络中mtumss是什么" class="hash-link" aria-label="Direct link to 计算机网络中MTU、MSS是什么？" title="Direct link to 计算机网络中MTU、MSS是什么？">​</a></h3>
<h3 class="anchor anchorWithStickyNavbar_gDIi" id="断线重连策略指数退避算法">断线重连策略（指数退避算法）<a href="#断线重连策略指数退避算法" class="hash-link" aria-label="Direct link to 断线重连策略（指数退避算法）" title="Direct link to 断线重连策略（指数退避算法）">​</a></h3>
<p>指数退避算法(Exponential Backoff)是处理<strong>断线重连</strong>的经典策略，它通过<strong>逐步增加重连间隔时间</strong>来避免网络<strong>恢复初期</strong>的<strong>大量重试请求</strong>导致服务器过载。</p>
<p>基本思想：</p>
<ul>
<li>首次重连延迟：较短时间（如1秒）</li>
<li>每次重连失败后：延迟时间按指数增长</li>
<li>达到最大延迟时间后：保持最大延迟不变</li>
<li>重连成功后：重置延迟时间</li>
</ul>
<p>优势：</p>
<ul>
<li>避免网络刚恢复时的&quot;惊群效应&quot;</li>
<li>减少不必要的重试请求</li>
<li>平衡及时性和系统负载</li>
</ul>
<p><strong>连接状态处理：</strong></p>
<ul>
<li>连接成功时重置计数器</li>
<li>连接失败时递增计数器并计算下次重连时间</li>
<li>达到最大重试次数后优雅关闭</li>
</ul>
<div class="language-java codeBlockContainer_meTV theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_EtmH"><pre tabindex="0" class="prism-code language-java codeBlock_SgF9 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_TAte"><span class="token-line" style="color:#393A34"><span class="token plain">public class ReconnectClient {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private final String host;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private final int port;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //最大重试次数 超过以后优雅关闭workerGroup</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private final int maxRetries;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //最大延迟时间 如果超过了则取maxDelaySec为最大延迟时间</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private final long maxDelaySec;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private Bootstrap bootstrap;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private EventLoopGroup workerGroup;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //当前重试次数</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private AtomicInteger retryCount = new AtomicInteger(0);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public ReconnectClient(String host, int port, int maxRetries, long maxDelaySec) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.host = host;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.port = port;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.maxRetries = maxRetries;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.maxDelaySec = maxDelaySec;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        initBootstrap();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private void initBootstrap() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        workerGroup = new NioEventLoopGroup();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        bootstrap = new Bootstrap();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        bootstrap.group(workerGroup).channel(NioSocketChannel.class)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .handler(new ChannelInitializer&lt;SocketChannel&gt;() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    protected void initChannel(SocketChannel ch) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        ChannelPipeline pipeline = ch.pipeline();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        pipeline.addLast(new IdleStateHandler(0, 0, 30));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        pipeline.addLast(new ReconnectHandler(ReconnectClient.this));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                });</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void connect() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ChannelFuture future = bootstrap.connect(host, port);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        future.addListener((ChannelFutureListener) f -&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (!f.isSuccess()) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                System.err.println(&quot;连接失败，准备重连...&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                scheduleReconnect();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            } else {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                System.out.println(&quot;连接成功!&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                retryCount.set(0); // 重置重试计数器</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        });</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private void scheduleReconnect() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (retryCount.get() &gt;= maxRetries) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            System.err.println(&quot;达到最大重试次数，停止重连&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            workerGroup.shutdownGracefully();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 计算退避时间 (2^n秒，最大不超过maxDelaySec)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        int retries = retryCount.getAndIncrement();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //指数计算，如果超过了最大延迟时间，则取最大延迟时间</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        long delay = Math.min((1L &lt;&lt; retries), maxDelaySec);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.printf(&quot;第%d次重连将在%d秒后执行...%n&quot;, retries + 1, delay);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 调度重连任务</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //使用EventLoop的定时任务功能，避免创建额外线程</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        workerGroup.schedule(() -&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            System.out.println(&quot;执行重连...&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            connect();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }, delay, TimeUnit.SECONDS);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ReconnectClient client = new ReconnectClient(&quot;127.0.0.1&quot;, 8080, 10, 60);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        client.connect();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//可选，根据业务选择</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class ReconnectHandler extends ChannelInboundHandlerAdapter {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private final ReconnectClient client;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public ReconnectHandler(ReconnectClient client) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.client = client;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //服务端断开连接的时候尝试重连接，但是需要结合业务，有的场景不可以在此处处理重新连接！！！</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void channelInactive(ChannelHandlerContext ctx) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;连接断开，准备重连...&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ctx.channel().eventLoop().schedule(() -&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            client.connect();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }, 1, TimeUnit.SECONDS); // 立即重连</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void exceptionCaught(ChannelHandlerContext ctx, Throwable cause) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        cause.printStackTrace();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ctx.close();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup_mDNQ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FByp" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_Jb1P"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_x7BQ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>高级优化方案：</strong></p>
<p>1、为避免多个客户端同步重连，可以在退避时间中加入随机因子</p>
<div class="language-java codeBlockContainer_meTV theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_EtmH"><pre tabindex="0" class="prism-code language-java codeBlock_SgF9 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_TAte"><span class="token-line" style="color:#393A34"><span class="token plain">// 在计算delay时加入随机抖动(±30%)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">long jitter = (long)(delay * 0.3 * (Math.random() * 2 - 1));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">delay = Math.min(delay + jitter, maxDelaySec);</span><br></span></code></pre><div class="buttonGroup_mDNQ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FByp" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_Jb1P"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_x7BQ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>2、结合IdleStateHandler实现心跳机制，在发现连接空闲时主动重连</p>
<div class="language-java codeBlockContainer_meTV theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_EtmH"><pre tabindex="0" class="prism-code language-java codeBlock_SgF9 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_TAte"><span class="token-line" style="color:#393A34"><span class="token plain">@Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public void userEventTriggered(ChannelHandlerContext ctx, Object evt) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (evt instanceof IdleStateEvent) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;检测到连接空闲，主动关闭并重连...&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ctx.channel().close().addListener(future -&gt; client.connect());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup_mDNQ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FByp" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_Jb1P"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_x7BQ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_gDIi" id="流量整形trafficshapinghandler">流量整形（TrafficShapingHandler）<a href="#流量整形trafficshapinghandler" class="hash-link" aria-label="Direct link to 流量整形（TrafficShapingHandler）" title="Direct link to 流量整形（TrafficShapingHandler）">​</a></h3>
<h3 class="anchor anchorWithStickyNavbar_gDIi" id="ssl和tls有什么区别">SSL和TLS有什么区别<a href="#ssl和tls有什么区别" class="hash-link" aria-label="Direct link to SSL和TLS有什么区别" title="Direct link to SSL和TLS有什么区别">​</a></h3>
<p><strong>注意：SSL 3.0存在重大安全漏洞，已经弃用！</strong></p>
<p>TLS是从SSL3.0基础上改进而来的，是SSL的<strong>继承者</strong>，安全性更高，支持更多的加密算法，同时TLS1.3大幅度减少了握手次数提升了性能，目前TLS的行业标准是<strong>TLS 1.2</strong>和<strong>TLS1.3</strong>版本。</p>
<p>单向认证案例：</p>
<p>1、客户端</p>
<div class="language-java codeBlockContainer_meTV theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_EtmH"><pre tabindex="0" class="prism-code language-java codeBlock_SgF9 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_TAte"><span class="token-line" style="color:#393A34"><span class="token plain">// 加载服务端的信任证书</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">File trustCertFile = new File(&quot;server_cert.pem&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// 配置支持 TLS 1.3 的 SSL 上下文</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SslContext sslContext = SslContextBuilder.forClient()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .trustManager(trustCertFile) // 信任服务端证书</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .protocols(&quot;TLSv1.3&quot;) // 指定使用 TLS 1.3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// 添加 SSL 处理器</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pipeline.addLast(sslContext.newHandler(ch.alloc()));</span><br></span></code></pre><div class="buttonGroup_mDNQ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FByp" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_Jb1P"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_x7BQ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>2、服务端</p>
<div class="language-java codeBlockContainer_meTV theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_EtmH"><pre tabindex="0" class="prism-code language-java codeBlock_SgF9 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_TAte"><span class="token-line" style="color:#393A34"><span class="token plain">// 加载服务端证书和私钥</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">File certFile = new File(&quot;server_cert.pem&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">File keyFile = new File(&quot;server_key.pem&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// 配置支持 TLS 1.3 的 SSL 上下文</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SslContext sslContext = SslContextBuilder.forServer(certFile, keyFile)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .protocols(&quot;TLSv1.3&quot;) // 指定使用 TLS 1.3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// 添加 SSL 处理器</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pipeline.addLast(sslContext.newHandler(ch.alloc()));</span><br></span></code></pre><div class="buttonGroup_mDNQ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FByp" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_Jb1P"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_x7BQ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>如果需要实现双向认证，需要将客户端认证代码改为：</p>
<div class="language-java codeBlockContainer_meTV theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_EtmH"><pre tabindex="0" class="prism-code language-java codeBlock_SgF9 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_TAte"><span class="token-line" style="color:#393A34"><span class="token plain">// 加载客户端证书和私钥</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">File clientCert = new File(&quot;client_cert.pem&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">File clientKey = new File(&quot;client_key.pem&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// 加载服务端证书（用于验证服务端）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">File serverCert = new File(&quot;server_cert.pem&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// 配置 SSL 上下文</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SslContext sslContext = SslContextBuilder.forClient()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .keyManager(clientCert, clientKey) // 客户端证书和私钥</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .trustManager(serverCert) // 信任服务端证书</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .protocols(&quot;TLSv1.3&quot;) // 指定使用 TLS 1.3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .build();</span><br></span></code></pre><div class="buttonGroup_mDNQ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FByp" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_Jb1P"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_x7BQ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>证书密钥生成工具可采用：openssl</p>
<h2 class="anchor anchorWithStickyNavbar_gDIi" id="java-nio-相关问题">Java NIO 相关问题<a href="#java-nio-相关问题" class="hash-link" aria-label="Direct link to Java NIO 相关问题" title="Direct link to Java NIO 相关问题">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_gDIi" id="bionio-和-aio-的区别">BIO、NIO 和 AIO 的区别？<a href="#bionio-和-aio-的区别" class="hash-link" aria-label="Direct link to BIO、NIO 和 AIO 的区别？" title="Direct link to BIO、NIO 和 AIO 的区别？">​</a></h3>
<h3 class="anchor anchorWithStickyNavbar_gDIi" id="nio-的组成是什么">NIO 的组成是什么？<a href="#nio-的组成是什么" class="hash-link" aria-label="Direct link to NIO 的组成是什么？" title="Direct link to NIO 的组成是什么？">​</a></h3>
<h3 class="anchor anchorWithStickyNavbar_gDIi" id="如何使用-java-nio-搭建简单的客户端与服务端实现网络通讯">如何使用 Java NIO 搭建简单的客户端与服务端实现网络通讯？<a href="#如何使用-java-nio-搭建简单的客户端与服务端实现网络通讯" class="hash-link" aria-label="Direct link to 如何使用 Java NIO 搭建简单的客户端与服务端实现网络通讯？" title="Direct link to 如何使用 Java NIO 搭建简单的客户端与服务端实现网络通讯？">​</a></h3>
<h3 class="anchor anchorWithStickyNavbar_gDIi" id="如何解决-jdk-nio-的空轮询-bug">如何解决 JDK NIO 的空轮询 Bug？<a href="#如何解决-jdk-nio-的空轮询-bug" class="hash-link" aria-label="Direct link to 如何解决 JDK NIO 的空轮询 Bug？" title="Direct link to 如何解决 JDK NIO 的空轮询 Bug？">​</a></h3>
<h3 class="anchor anchorWithStickyNavbar_gDIi" id="selectpollepoll-的区别">Select、Poll、Epoll 的区别？<a href="#selectpollepoll-的区别" class="hash-link" aria-label="Direct link to Select、Poll、Epoll 的区别？" title="Direct link to Select、Poll、Epoll 的区别？">​</a></h3>
<h3 class="anchor anchorWithStickyNavbar_gDIi" id="如何实现断线重连">如何实现断线重连<a href="#如何实现断线重连" class="hash-link" aria-label="Direct link to 如何实现断线重连" title="Direct link to 如何实现断线重连">​</a></h3>
<p>1、方法一：监听ChannelHandler#<strong>channelInactive</strong>方法，在断开连接的时候会调用此方法，可以在该方法中通过<code>固定时间间隔</code>、
<code>指数退避策略</code>、<code>无限重试</code>等逻辑实现重连服务器</p>
<p>2、方法二：在bootstrap中添加监听器实现重连，如：</p>
<div class="language-java codeBlockContainer_meTV theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_EtmH"><pre tabindex="0" class="prism-code language-java codeBlock_SgF9 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_TAte"><span class="token-line" style="color:#393A34"><span class="token plain">Bootstrap bootstrap = new Bootstrap();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">bootstrap.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">group(new NioEventLoopGroup())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">channel(NioSocketChannel .class)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         .</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">handler(new ChannelInitializer&lt;SocketChannel&gt;() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    protected void initChannel (SocketChannel ch) throws Exception {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">});</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ChannelFuture future = bootstrap.connect(&quot;localhost&quot;, 8080);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">future.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">addListener((ChannelFutureListener) f -&gt;{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if(!f.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">isSuccess()){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">println(&quot;连接失败，正在重试。..&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        f.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">channel().</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">eventLoop().</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">schedule(() -&gt;bootstrap.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">connect(&quot;localhost&quot;,8080), 5,TimeUnit.SECONDS);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        });</span><br></span></code></pre><div class="buttonGroup_mDNQ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FByp" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_Jb1P"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_x7BQ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>3、方法三：组合心跳机制，在HeartbeatHandler中实现重连服务器。</p>
<div class="language-java codeBlockContainer_meTV theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_EtmH"><pre tabindex="0" class="prism-code language-java codeBlock_SgF9 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_TAte"><span class="token-line" style="color:#393A34"><span class="token plain">pipeline.addLast(new IdleStateHandler(0, 0,5,TimeUnit.SECONDS)); // 5 秒读写空闲检测</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        pipeline.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">addLast(new HeartbeatHandler());</span><br></span></code></pre><div class="buttonGroup_mDNQ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FByp" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_Jb1P"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_x7BQ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_gDIi" id="netty是如何实现心跳机制的原理是什么">Netty是如何实现心跳机制的？原理是什么？<a href="#netty是如何实现心跳机制的原理是什么" class="hash-link" aria-label="Direct link to Netty是如何实现心跳机制的？原理是什么？" title="Direct link to Netty是如何实现心跳机制的？原理是什么？">​</a></h3>
<p>采用IdleStateHandler处理器实现，该处理器内置了3个空闲超时定时任务线程分别处理3种状态，分别是<code>读空闲</code>、<code>写空闲</code>、<code>读写空闲</code>
，当检测到超时的时候就回触发相应的事件，并将事件传递到下一个handler，用户可以在
自定义的handler中通过重写#userEventTriggered方法监听事件进行业务处理。</p>
<div class="language-java codeBlockContainer_meTV theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_EtmH"><pre tabindex="0" class="prism-code language-java codeBlock_SgF9 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_TAte"><span class="token-line" style="color:#393A34"><span class="token plain">public enum IdleState {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * 一段时间没有收到任何数据。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    READER_IDLE,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * 一段时间没有发送数据。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    WRITER_IDLE,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * 一段时间没有收到或发送任何数据。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ALL_IDLE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup_mDNQ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FByp" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_Jb1P"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_x7BQ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-java codeBlockContainer_meTV theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_EtmH"><pre tabindex="0" class="prism-code language-java codeBlock_SgF9 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_TAte"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public void userEventTriggered(ChannelHandlerContext ctx, Object evt) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (evt instanceof IdleStateEvent) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        IdleStateEvent event = (IdeStateEvent) evt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (event.state() == IdleState.READER_IDLE) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ctx.close(); //如读超时关闭连接</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //或写超时发送ping心跳信息ctx.write().writeAndFlush(&quot;PING\n&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup_mDNQ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FByp" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_Jb1P"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_x7BQ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_gDIi" id="nioeventloopgroup-默认的构造函数会起多少线程">NioEventLoopGroup 默认的构造函数会起多少线程？<a href="#nioeventloopgroup-默认的构造函数会起多少线程" class="hash-link" aria-label="Direct link to NioEventLoopGroup 默认的构造函数会起多少线程？" title="Direct link to NioEventLoopGroup 默认的构造函数会起多少线程？">​</a></h3>
<p>如果用户没有指定线程数，默认会创建<strong>2*cpu核心数</strong>，例如4核cpu就会默认创建8个线程，源码如下：</p>
<div class="language-java codeBlockContainer_meTV theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_EtmH"><pre tabindex="0" class="prism-code language-java codeBlock_SgF9 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_TAte codeBlockLinesWithNumbering_VfiG"><span class="token-line codeLine_Yiip" style="color:#393A34"><span class="codeLineNumber_e74U"></span><span class="codeLineContent_xcwl"><span class="token plain">public abstract class MultithreadEventLoopGroup extends MultithreadEventExecutorGroup implements EventLoopGroup {</span></span><br></span><span class="token-line codeLine_Yiip" style="color:#393A34"><span class="codeLineNumber_e74U"></span><span class="codeLineContent_xcwl"><span class="token plain">    private static final int DEFAULT_EVENT_LOOP_THREADS;</span></span><br></span><span class="token-line codeLine_Yiip" style="color:#393A34"><span class="codeLineNumber_e74U"></span><span class="codeLineContent_xcwl"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_Yiip" style="color:#393A34"><span class="codeLineNumber_e74U"></span><span class="codeLineContent_xcwl"><span class="token plain">    static {</span></span><br></span><span class="token-line codeLine_Yiip" style="color:#393A34"><span class="codeLineNumber_e74U"></span><span class="codeLineContent_xcwl"><span class="token plain">        //采用max是为了健壮性考虑，避免极端场景如虚拟环境、容器限制等场景出现0，实际不会有0核的cpu</span></span><br></span><span class="token-line codeLine_Yiip" style="color:#393A34"><span class="codeLineNumber_e74U"></span><span class="codeLineContent_xcwl"><span class="token plain">        DEFAULT_EVENT_LOOP_THREADS = Math.max(1, SystemPropertyUtil.getInt(</span></span><br></span><span class="token-line codeLine_Yiip" style="color:#393A34"><span class="codeLineNumber_e74U"></span><span class="codeLineContent_xcwl"><span class="token plain">                &quot;io.netty.eventLoopThreads&quot;, NettyRuntime.availableProcessors() * 2));</span></span><br></span><span class="token-line codeLine_Yiip" style="color:#393A34"><span class="codeLineNumber_e74U"></span><span class="codeLineContent_xcwl"><span class="token plain">    }</span></span><br></span><span class="token-line codeLine_Yiip" style="color:#393A34"><span class="codeLineNumber_e74U"></span><span class="codeLineContent_xcwl"><span class="token plain">}</span></span><br></span></code></pre><div class="buttonGroup_mDNQ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FByp" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_Jb1P"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_x7BQ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_gDIi" id="粘包与半包相关问题">粘包与半包相关问题<a href="#粘包与半包相关问题" class="hash-link" aria-label="Direct link to 粘包与半包相关问题" title="Direct link to 粘包与半包相关问题">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_gDIi" id="什么是粘包与半包问题">什么是粘包与半包问题？<a href="#什么是粘包与半包问题" class="hash-link" aria-label="Direct link to 什么是粘包与半包问题？" title="Direct link to 什么是粘包与半包问题？">​</a></h3>
<h3 class="anchor anchorWithStickyNavbar_gDIi" id="粘包与半包为何会出现">粘包与半包为何会出现？<a href="#粘包与半包为何会出现" class="hash-link" aria-label="Direct link to 粘包与半包为何会出现？" title="Direct link to 粘包与半包为何会出现？">​</a></h3>
<h3 class="anchor anchorWithStickyNavbar_gDIi" id="netty-框架本身存在粘包半包问题">Netty 框架本身存在粘包半包问题？<a href="#netty-框架本身存在粘包半包问题" class="hash-link" aria-label="Direct link to Netty 框架本身存在粘包半包问题？" title="Direct link to Netty 框架本身存在粘包半包问题？">​</a></h3>
<h3 class="anchor anchorWithStickyNavbar_gDIi" id="什么时候需要考虑粘包与半包问题">什么时候需要考虑粘包与半包问题？<a href="#什么时候需要考虑粘包与半包问题" class="hash-link" aria-label="Direct link to 什么时候需要考虑粘包与半包问题？" title="Direct link to 什么时候需要考虑粘包与半包问题？">​</a></h3>
<h3 class="anchor anchorWithStickyNavbar_gDIi" id="如何避免粘包与半包问题">如何避免粘包与半包问题？<a href="#如何避免粘包与半包问题" class="hash-link" aria-label="Direct link to 如何避免粘包与半包问题？" title="Direct link to 如何避免粘包与半包问题？">​</a></h3>
<h3 class="anchor anchorWithStickyNavbar_gDIi" id="netty-如何解决拆包和粘包问题">Netty 如何解决拆包和粘包问题？<a href="#netty-如何解决拆包和粘包问题" class="hash-link" aria-label="Direct link to Netty 如何解决拆包和粘包问题？" title="Direct link to Netty 如何解决拆包和粘包问题？">​</a></h3>
<h3 class="anchor anchorWithStickyNavbar_gDIi" id="如何使用包定长-fixedlengthframedecoder-解决粘包与半包问题原理是什么">如何使用包定长 FixedLengthFrameDecoder 解决粘包与半包问题？原理是什么？<a href="#如何使用包定长-fixedlengthframedecoder-解决粘包与半包问题原理是什么" class="hash-link" aria-label="Direct link to 如何使用包定长 FixedLengthFrameDecoder 解决粘包与半包问题？原理是什么？" title="Direct link to 如何使用包定长 FixedLengthFrameDecoder 解决粘包与半包问题？原理是什么？">​</a></h3>
<h3 class="anchor anchorWithStickyNavbar_gDIi" id="如何使用包分隔符-delimiterbasedframedecoder-解决粘包与半包问题原理是什么">如何使用包分隔符 DelimiterBasedFrameDecoder 解决粘包与半包问题？原理是什么？<a href="#如何使用包分隔符-delimiterbasedframedecoder-解决粘包与半包问题原理是什么" class="hash-link" aria-label="Direct link to 如何使用包分隔符 DelimiterBasedFrameDecoder 解决粘包与半包问题？原理是什么？" title="Direct link to 如何使用包分隔符 DelimiterBasedFrameDecoder 解决粘包与半包问题？原理是什么？">​</a></h3>
<h3 class="anchor anchorWithStickyNavbar_gDIi" id="使用-netty-作为网络通讯时候是如何避免粘包与半包问题">使用 Netty 作为网络通讯时候是如何避免粘包与半包问题？<a href="#使用-netty-作为网络通讯时候是如何避免粘包与半包问题" class="hash-link" aria-label="Direct link to 使用 Netty 作为网络通讯时候是如何避免粘包与半包问题？" title="Direct link to 使用 Netty 作为网络通讯时候是如何避免粘包与半包问题？">​</a></h3>
<h3 class="anchor anchorWithStickyNavbar_gDIi" id="如何自定义任务">如何自定义任务<a href="#如何自定义任务" class="hash-link" aria-label="Direct link to 如何自定义任务" title="Direct link to 如何自定义任务">​</a></h3>
<p>特别注意：在handler上下文中添加的自定义任务是在<strong>同一个线程</strong>中执行，意味着对于多个任务将会<strong>串行执行</strong>！</p>
<div class="language-java codeBlockContainer_meTV theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_EtmH"><pre tabindex="0" class="prism-code language-java codeBlock_SgF9 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_TAte"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public void channelRead(ChannelHandlerContext ctx, Object msg) { // (2)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ctx.channel().eventLoop().execute(new Runnable() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        public void run() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Thread.sleep(1 * 10000);//1秒后执行</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            System.out.println(&quot;task 1&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    });</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ctx.channel().eventLoop().execute(new Runnable() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        public void run() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Thread.sleep(2 * 10000);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            System.out.println(&quot;task 2&quot;); //30秒后执行</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    });</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup_mDNQ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FByp" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_Jb1P"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_x7BQ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_gDIi" id="netty-零拷贝相关问题">Netty 零拷贝相关问题<a href="#netty-零拷贝相关问题" class="hash-link" aria-label="Direct link to Netty 零拷贝相关问题" title="Direct link to Netty 零拷贝相关问题">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_gDIi" id="说说对于-netty-的零拷贝理解">说说对于 Netty 的零拷贝理解？<a href="#说说对于-netty-的零拷贝理解" class="hash-link" aria-label="Direct link to 说说对于 Netty 的零拷贝理解？" title="Direct link to 说说对于 Netty 的零拷贝理解？">​</a></h3>
<h3 class="anchor anchorWithStickyNavbar_gDIi" id="netty-零拷贝体现在哪里">Netty 零拷贝体现在哪里？<a href="#netty-零拷贝体现在哪里" class="hash-link" aria-label="Direct link to Netty 零拷贝体现在哪里？" title="Direct link to Netty 零拷贝体现在哪里？">​</a></h3>
<h2 class="anchor anchorWithStickyNavbar_gDIi" id="websocket-协议开发相关问题">WebSocket 协议开发相关问题<a href="#websocket-协议开发相关问题" class="hash-link" aria-label="Direct link to WebSocket 协议开发相关问题" title="Direct link to WebSocket 协议开发相关问题">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_gDIi" id="讲讲如何实现-websocket-长连接">讲讲如何实现 WebSocket 长连接？<a href="#讲讲如何实现-websocket-长连接" class="hash-link" aria-label="Direct link to 讲讲如何实现 WebSocket 长连接？" title="Direct link to 讲讲如何实现 WebSocket 长连接？">​</a></h3>
<h3 class="anchor anchorWithStickyNavbar_gDIi" id="讲讲-websocket-帧结构的理解">讲讲 WebSocket 帧结构的理解？<a href="#讲讲-websocket-帧结构的理解" class="hash-link" aria-label="Direct link to 讲讲 WebSocket 帧结构的理解？" title="Direct link to 讲讲 WebSocket 帧结构的理解？">​</a></h3>
<h3 class="anchor anchorWithStickyNavbar_gDIi" id="浏览器服务器对-websocket-的支持情况">浏览器、服务器对 WebSocket 的支持情况？<a href="#浏览器服务器对-websocket-的支持情况" class="hash-link" aria-label="Direct link to 浏览器、服务器对 WebSocket 的支持情况？" title="Direct link to 浏览器、服务器对 WebSocket 的支持情况？">​</a></h3>
<h3 class="anchor anchorWithStickyNavbar_gDIi" id="如何使用-websocket-接收和发送广播信息">如何使用 WebSocket 接收和发送广播信息？<a href="#如何使用-websocket-接收和发送广播信息" class="hash-link" aria-label="Direct link to 如何使用 WebSocket 接收和发送广播信息？" title="Direct link to 如何使用 WebSocket 接收和发送广播信息？">​</a></h3>
<h3 class="anchor anchorWithStickyNavbar_gDIi" id="如何使用-websocket-接收和发送二进制信息">如何使用 WebSocket 接收和发送二进制信息？<a href="#如何使用-websocket-接收和发送二进制信息" class="hash-link" aria-label="Direct link to 如何使用 WebSocket 接收和发送二进制信息？" title="Direct link to 如何使用 WebSocket 接收和发送二进制信息？">​</a></h3>
<h2 class="anchor anchorWithStickyNavbar_gDIi" id="netty-源码分析相关问题">Netty 源码分析相关问题<a href="#netty-源码分析相关问题" class="hash-link" aria-label="Direct link to Netty 源码分析相关问题" title="Direct link to Netty 源码分析相关问题">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_gDIi" id="服务端如何进行初始化">服务端如何进行初始化？<a href="#服务端如何进行初始化" class="hash-link" aria-label="Direct link to 服务端如何进行初始化？" title="Direct link to 服务端如何进行初始化？">​</a></h3>
<h3 class="anchor anchorWithStickyNavbar_gDIi" id="何时接受客户端请求">何时接受客户端请求？<a href="#何时接受客户端请求" class="hash-link" aria-label="Direct link to 何时接受客户端请求？" title="Direct link to 何时接受客户端请求？">​</a></h3>
<h3 class="anchor anchorWithStickyNavbar_gDIi" id="何时注册接受-socket-并注册到对应的-eventloop-管理的-selector">何时注册接受 Socket 并注册到对应的 EventLoop 管理的 Selector？<a href="#何时注册接受-socket-并注册到对应的-eventloop-管理的-selector" class="hash-link" aria-label="Direct link to 何时注册接受 Socket 并注册到对应的 EventLoop 管理的 Selector？" title="Direct link to 何时注册接受 Socket 并注册到对应的 EventLoop 管理的 Selector？">​</a></h3>
<h3 class="anchor anchorWithStickyNavbar_gDIi" id="客户端如何进行初始化">客户端如何进行初始化？<a href="#客户端如何进行初始化" class="hash-link" aria-label="Direct link to 客户端如何进行初始化？" title="Direct link to 客户端如何进行初始化？">​</a></h3>
<h3 class="anchor anchorWithStickyNavbar_gDIi" id="何时创建的-defaultchannelpipeline">何时创建的 DefaultChannelPipeline？<a href="#何时创建的-defaultchannelpipeline" class="hash-link" aria-label="Direct link to 何时创建的 DefaultChannelPipeline？" title="Direct link to 何时创建的 DefaultChannelPipeline？">​</a></h3>
<h2 class="anchor anchorWithStickyNavbar_gDIi" id="tcp-连接与序列化协议相关问题">TCP 连接与序列化协议相关问题<a href="#tcp-连接与序列化协议相关问题" class="hash-link" aria-label="Direct link to TCP 连接与序列化协议相关问题" title="Direct link to TCP 连接与序列化协议相关问题">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_gDIi" id="tcp-的长连接和短连接">TCP 的长连接和短连接？<a href="#tcp-的长连接和短连接" class="hash-link" aria-label="Direct link to TCP 的长连接和短连接？" title="Direct link to TCP 的长连接和短连接？">​</a></h3>
<h3 class="anchor anchorWithStickyNavbar_gDIi" id="有哪些序列化协议">有哪些序列化协议？<a href="#有哪些序列化协议" class="hash-link" aria-label="Direct link to 有哪些序列化协议？" title="Direct link to 有哪些序列化协议？">​</a></h3>
<h3 class="anchor anchorWithStickyNavbar_gDIi" id="channelpipeline的inboundoutbound事件传播机制">ChannelPipeline的inbound/outbound事件传播机制<a href="#channelpipeline的inboundoutbound事件传播机制" class="hash-link" aria-label="Direct link to ChannelPipeline的inbound/outbound事件传播机制" title="Direct link to ChannelPipeline的inbound/outbound事件传播机制">​</a></h3>
<h3 class="anchor anchorWithStickyNavbar_gDIi" id="channelhandlercontext的传播逻辑">ChannelHandlerContext的传播逻辑<a href="#channelhandlercontext的传播逻辑" class="hash-link" aria-label="Direct link to ChannelHandlerContext的传播逻辑" title="Direct link to ChannelHandlerContext的传播逻辑">​</a></h3>
<h3 class="anchor anchorWithStickyNavbar_gDIi" id="nioeventloop事件循环流程">NioEventLoop事件循环流程<a href="#nioeventloop事件循环流程" class="hash-link" aria-label="Direct link to NioEventLoop事件循环流程" title="Direct link to NioEventLoop事件循环流程">​</a></h3>
<h3 class="anchor anchorWithStickyNavbar_gDIi" id="内存泄漏检测原理resourceleakdetector">内存泄漏检测原理（ResourceLeakDetector）<a href="#内存泄漏检测原理resourceleakdetector" class="hash-link" aria-label="Direct link to 内存泄漏检测原理（ResourceLeakDetector）" title="Direct link to 内存泄漏检测原理（ResourceLeakDetector）">​</a></h3>
<h2 class="anchor anchorWithStickyNavbar_gDIi" id="应用项目设计相关">应用项目设计相关<a href="#应用项目设计相关" class="hash-link" aria-label="Direct link to 应用项目设计相关" title="Direct link to 应用项目设计相关">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_gDIi" id="如何设计一个java对象池减少gc和内存分配消耗">如何设计一个Java对象池，减少GC和内存分配消耗<a href="#如何设计一个java对象池减少gc和内存分配消耗" class="hash-link" aria-label="Direct link to 如何设计一个Java对象池，减少GC和内存分配消耗" title="Direct link to 如何设计一个Java对象池，减少GC和内存分配消耗">​</a></h3>
<h3 class="anchor anchorWithStickyNavbar_gDIi" id="如何设计一个内存池或者内存分配器">如何设计一个内存池，或者内存分配器<a href="#如何设计一个内存池或者内存分配器" class="hash-link" aria-label="Direct link to 如何设计一个内存池，或者内存分配器" title="Direct link to 如何设计一个内存池，或者内存分配器">​</a></h3>
<h3 class="anchor anchorWithStickyNavbar_gDIi" id="如何用netty处理http请求实现增删改查">如何用netty处理http请求实现增删改查<a href="#如何用netty处理http请求实现增删改查" class="hash-link" aria-label="Direct link to 如何用netty处理http请求实现增删改查" title="Direct link to 如何用netty处理http请求实现增删改查">​</a></h3>
<p>核心处理器：</p>
<ul>
<li>HttpServerCodec 编解码</li>
<li>HttpObjectAggregator 消息聚合</li>
<li>ChunkedWriteHandler 大文件支持 数据切割</li>
<li>HttpRequestHandler（自定义用于处理自己业务的处理器）</li>
</ul>
<div class="language-java codeBlockContainer_meTV theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_EtmH"><pre tabindex="0" class="prism-code language-java codeBlock_SgF9 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_TAte"><span class="token-line" style="color:#393A34"><span class="token plain"> public class HttpRequestHandler extends SimpleChannelInboundHandler&lt;FullHttpRequest&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    protected void channelRead0(ChannelHandlerContext ctx, FullHttpRequest request) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //FullHttpResponse用于构建响应 例如返回数据 响应头等</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup_mDNQ"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_FByp" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_Jb1P"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_x7BQ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_gDIi" id="性能优化相关">性能优化相关<a href="#性能优化相关" class="hash-link" aria-label="Direct link to 性能优化相关" title="Direct link to 性能优化相关">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_gDIi" id="内存优化-对象池化recycler">内存优化-对象池化（Recycler）<a href="#内存优化-对象池化recycler" class="hash-link" aria-label="Direct link to 内存优化-对象池化（Recycler）" title="Direct link to 内存优化-对象池化（Recycler）">​</a></h3>
<p>源码应用：ByteBuf</p>
<h3 class="anchor anchorWithStickyNavbar_gDIi" id="内存优化-directbuffer-vs-heapbuffer">内存优化-DirectBuffer vs HeapBuffer<a href="#内存优化-directbuffer-vs-heapbuffer" class="hash-link" aria-label="Direct link to 内存优化-DirectBuffer vs HeapBuffer" title="Direct link to 内存优化-DirectBuffer vs HeapBuffer">​</a></h3>
<h3 class="anchor anchorWithStickyNavbar_gDIi" id="零拷贝-fileregion文件传输">零拷贝-FileRegion文件传输<a href="#零拷贝-fileregion文件传输" class="hash-link" aria-label="Direct link to 零拷贝-FileRegion文件传输" title="Direct link to 零拷贝-FileRegion文件传输">​</a></h3>
<h3 class="anchor anchorWithStickyNavbar_gDIi" id="零拷贝-compositebytebuf合并缓冲">零拷贝-CompositeByteBuf合并缓冲<a href="#零拷贝-compositebytebuf合并缓冲" class="hash-link" aria-label="Direct link to 零拷贝-CompositeByteBuf合并缓冲" title="Direct link to 零拷贝-CompositeByteBuf合并缓冲">​</a></h3>
<h3 class="anchor anchorWithStickyNavbar_gDIi" id="锁优化无锁化设计">锁优化（无锁化设计）<a href="#锁优化无锁化设计" class="hash-link" aria-label="Direct link to 锁优化（无锁化设计）" title="Direct link to 锁优化（无锁化设计）">​</a></h3>
<h3 class="anchor anchorWithStickyNavbar_gDIi" id="promise与future异步编程">Promise与Future异步编程<a href="#promise与future异步编程" class="hash-link" aria-label="Direct link to Promise与Future异步编程" title="Direct link to Promise与Future异步编程">​</a></h3>
<h3 class="anchor anchorWithStickyNavbar_gDIi" id="避免channelhandler阻塞业务线程池">避免ChannelHandler阻塞（业务线程池）<a href="#避免channelhandler阻塞业务线程池" class="hash-link" aria-label="Direct link to 避免ChannelHandler阻塞（业务线程池）" title="Direct link to 避免ChannelHandler阻塞（业务线程池）">​</a></h3></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/xilio-dev/xilio-doc/tree/main/docs/netty/问题总结.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_NZGJ" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_CBNV"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/xilio-doc/en/docs/netty/网络基础"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">网络基础</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_L7y9 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#netty-基础相关问题" class="table-of-contents__link toc-highlight">Netty 基础相关问题</a><ul><li><a href="#讲讲-netty-的特点" class="table-of-contents__link toc-highlight">讲讲 Netty 的特点？</a></li><li><a href="#netty-的高性能体现在" class="table-of-contents__link toc-highlight">Netty 的高性能体现在？</a></li><li><a href="#netty-的线程模型是什么" class="table-of-contents__link toc-highlight">Netty 的线程模型是什么？</a></li><li><a href="#什么是-reactor-模型" class="table-of-contents__link toc-highlight">什么是 Reactor 模型？</a></li><li><a href="#说说-netty-中几个重要的对象是什么它们之间的关系是什么" class="table-of-contents__link toc-highlight">说说 Netty 中几个重要的对象是什么，它们之间的关系是什么？</a></li><li><a href="#eventloop-与-eventloopgroup-是什么关系" class="table-of-contents__link toc-highlight">EventLoop 与 EventLoopGroup 是什么关系？</a></li><li><a href="#channel-与-socket-是什么关系channel-与-eventloop-是什么关系channel-与-channelpipeline-是什么关系" class="table-of-contents__link toc-highlight">Channel 与 Socket 是什么关系，Channel 与 EventLoop 是什么关系，Channel 与 ChannelPipeline 是什么关系？</a></li><li><a href="#讲讲-netty-底层操作与-java-nio-操作对应关系" class="table-of-contents__link toc-highlight">讲讲 Netty 底层操作与 Java NIO 操作对应关系？</a></li><li><a href="#netty-的-channelhandler-为什么需要-sharable-注解" class="table-of-contents__link toc-highlight">Netty 的 ChannelHandler 为什么需要 @Sharable 注解？</a></li><li><a href="#spring-postconstruct-是什么" class="table-of-contents__link toc-highlight">Spring @PostConstruct 是什么？</a></li><li><a href="#计算机网络中mtumss是什么" class="table-of-contents__link toc-highlight">计算机网络中MTU、MSS是什么？</a></li><li><a href="#断线重连策略指数退避算法" class="table-of-contents__link toc-highlight">断线重连策略（指数退避算法）</a></li><li><a href="#流量整形trafficshapinghandler" class="table-of-contents__link toc-highlight">流量整形（TrafficShapingHandler）</a></li><li><a href="#ssl和tls有什么区别" class="table-of-contents__link toc-highlight">SSL和TLS有什么区别</a></li></ul></li><li><a href="#java-nio-相关问题" class="table-of-contents__link toc-highlight">Java NIO 相关问题</a><ul><li><a href="#bionio-和-aio-的区别" class="table-of-contents__link toc-highlight">BIO、NIO 和 AIO 的区别？</a></li><li><a href="#nio-的组成是什么" class="table-of-contents__link toc-highlight">NIO 的组成是什么？</a></li><li><a href="#如何使用-java-nio-搭建简单的客户端与服务端实现网络通讯" class="table-of-contents__link toc-highlight">如何使用 Java NIO 搭建简单的客户端与服务端实现网络通讯？</a></li><li><a href="#如何解决-jdk-nio-的空轮询-bug" class="table-of-contents__link toc-highlight">如何解决 JDK NIO 的空轮询 Bug？</a></li><li><a href="#selectpollepoll-的区别" class="table-of-contents__link toc-highlight">Select、Poll、Epoll 的区别？</a></li><li><a href="#如何实现断线重连" class="table-of-contents__link toc-highlight">如何实现断线重连</a></li><li><a href="#netty是如何实现心跳机制的原理是什么" class="table-of-contents__link toc-highlight">Netty是如何实现心跳机制的？原理是什么？</a></li><li><a href="#nioeventloopgroup-默认的构造函数会起多少线程" class="table-of-contents__link toc-highlight">NioEventLoopGroup 默认的构造函数会起多少线程？</a></li></ul></li><li><a href="#粘包与半包相关问题" class="table-of-contents__link toc-highlight">粘包与半包相关问题</a><ul><li><a href="#什么是粘包与半包问题" class="table-of-contents__link toc-highlight">什么是粘包与半包问题？</a></li><li><a href="#粘包与半包为何会出现" class="table-of-contents__link toc-highlight">粘包与半包为何会出现？</a></li><li><a href="#netty-框架本身存在粘包半包问题" class="table-of-contents__link toc-highlight">Netty 框架本身存在粘包半包问题？</a></li><li><a href="#什么时候需要考虑粘包与半包问题" class="table-of-contents__link toc-highlight">什么时候需要考虑粘包与半包问题？</a></li><li><a href="#如何避免粘包与半包问题" class="table-of-contents__link toc-highlight">如何避免粘包与半包问题？</a></li><li><a href="#netty-如何解决拆包和粘包问题" class="table-of-contents__link toc-highlight">Netty 如何解决拆包和粘包问题？</a></li><li><a href="#如何使用包定长-fixedlengthframedecoder-解决粘包与半包问题原理是什么" class="table-of-contents__link toc-highlight">如何使用包定长 FixedLengthFrameDecoder 解决粘包与半包问题？原理是什么？</a></li><li><a href="#如何使用包分隔符-delimiterbasedframedecoder-解决粘包与半包问题原理是什么" class="table-of-contents__link toc-highlight">如何使用包分隔符 DelimiterBasedFrameDecoder 解决粘包与半包问题？原理是什么？</a></li><li><a href="#使用-netty-作为网络通讯时候是如何避免粘包与半包问题" class="table-of-contents__link toc-highlight">使用 Netty 作为网络通讯时候是如何避免粘包与半包问题？</a></li><li><a href="#如何自定义任务" class="table-of-contents__link toc-highlight">如何自定义任务</a></li></ul></li><li><a href="#netty-零拷贝相关问题" class="table-of-contents__link toc-highlight">Netty 零拷贝相关问题</a><ul><li><a href="#说说对于-netty-的零拷贝理解" class="table-of-contents__link toc-highlight">说说对于 Netty 的零拷贝理解？</a></li><li><a href="#netty-零拷贝体现在哪里" class="table-of-contents__link toc-highlight">Netty 零拷贝体现在哪里？</a></li></ul></li><li><a href="#websocket-协议开发相关问题" class="table-of-contents__link toc-highlight">WebSocket 协议开发相关问题</a><ul><li><a href="#讲讲如何实现-websocket-长连接" class="table-of-contents__link toc-highlight">讲讲如何实现 WebSocket 长连接？</a></li><li><a href="#讲讲-websocket-帧结构的理解" class="table-of-contents__link toc-highlight">讲讲 WebSocket 帧结构的理解？</a></li><li><a href="#浏览器服务器对-websocket-的支持情况" class="table-of-contents__link toc-highlight">浏览器、服务器对 WebSocket 的支持情况？</a></li><li><a href="#如何使用-websocket-接收和发送广播信息" class="table-of-contents__link toc-highlight">如何使用 WebSocket 接收和发送广播信息？</a></li><li><a href="#如何使用-websocket-接收和发送二进制信息" class="table-of-contents__link toc-highlight">如何使用 WebSocket 接收和发送二进制信息？</a></li></ul></li><li><a href="#netty-源码分析相关问题" class="table-of-contents__link toc-highlight">Netty 源码分析相关问题</a><ul><li><a href="#服务端如何进行初始化" class="table-of-contents__link toc-highlight">服务端如何进行初始化？</a></li><li><a href="#何时接受客户端请求" class="table-of-contents__link toc-highlight">何时接受客户端请求？</a></li><li><a href="#何时注册接受-socket-并注册到对应的-eventloop-管理的-selector" class="table-of-contents__link toc-highlight">何时注册接受 Socket 并注册到对应的 EventLoop 管理的 Selector？</a></li><li><a href="#客户端如何进行初始化" class="table-of-contents__link toc-highlight">客户端如何进行初始化？</a></li><li><a href="#何时创建的-defaultchannelpipeline" class="table-of-contents__link toc-highlight">何时创建的 DefaultChannelPipeline？</a></li></ul></li><li><a href="#tcp-连接与序列化协议相关问题" class="table-of-contents__link toc-highlight">TCP 连接与序列化协议相关问题</a><ul><li><a href="#tcp-的长连接和短连接" class="table-of-contents__link toc-highlight">TCP 的长连接和短连接？</a></li><li><a href="#有哪些序列化协议" class="table-of-contents__link toc-highlight">有哪些序列化协议？</a></li><li><a href="#channelpipeline的inboundoutbound事件传播机制" class="table-of-contents__link toc-highlight">ChannelPipeline的inbound/outbound事件传播机制</a></li><li><a href="#channelhandlercontext的传播逻辑" class="table-of-contents__link toc-highlight">ChannelHandlerContext的传播逻辑</a></li><li><a href="#nioeventloop事件循环流程" class="table-of-contents__link toc-highlight">NioEventLoop事件循环流程</a></li><li><a href="#内存泄漏检测原理resourceleakdetector" class="table-of-contents__link toc-highlight">内存泄漏检测原理（ResourceLeakDetector）</a></li></ul></li><li><a href="#应用项目设计相关" class="table-of-contents__link toc-highlight">应用项目设计相关</a><ul><li><a href="#如何设计一个java对象池减少gc和内存分配消耗" class="table-of-contents__link toc-highlight">如何设计一个Java对象池，减少GC和内存分配消耗</a></li><li><a href="#如何设计一个内存池或者内存分配器" class="table-of-contents__link toc-highlight">如何设计一个内存池，或者内存分配器</a></li><li><a href="#如何用netty处理http请求实现增删改查" class="table-of-contents__link toc-highlight">如何用netty处理http请求实现增删改查</a></li></ul></li><li><a href="#性能优化相关" class="table-of-contents__link toc-highlight">性能优化相关</a><ul><li><a href="#内存优化-对象池化recycler" class="table-of-contents__link toc-highlight">内存优化-对象池化（Recycler）</a></li><li><a href="#内存优化-directbuffer-vs-heapbuffer" class="table-of-contents__link toc-highlight">内存优化-DirectBuffer vs HeapBuffer</a></li><li><a href="#零拷贝-fileregion文件传输" class="table-of-contents__link toc-highlight">零拷贝-FileRegion文件传输</a></li><li><a href="#零拷贝-compositebytebuf合并缓冲" class="table-of-contents__link toc-highlight">零拷贝-CompositeByteBuf合并缓冲</a></li><li><a href="#锁优化无锁化设计" class="table-of-contents__link toc-highlight">锁优化（无锁化设计）</a></li><li><a href="#promise与future异步编程" class="table-of-contents__link toc-highlight">Promise与Future异步编程</a></li><li><a href="#避免channelhandler阻塞业务线程池" class="table-of-contents__link toc-highlight">避免ChannelHandler阻塞（业务线程池）</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">文档</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/xilio-doc/en/docs/intro">介绍</a></li></ul></div><div class="col footer__col"><div class="footer__title">社区</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.xilio.cn" target="_blank" rel="noopener noreferrer" class="footer__link-item">动态博客站点<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_QBFE"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">更多</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/xilio-doc/en/blog">博客</a></li><li class="footer__item"><a href="https://github.com/xilio-dev" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_QBFE"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://gitee.com/xilio" target="_blank" rel="noopener noreferrer" class="footer__link-item">Gitee<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_QBFE"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 xilio</div></div></div></footer></div>
</body>
</html>